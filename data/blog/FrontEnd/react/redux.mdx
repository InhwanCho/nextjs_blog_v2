---
title: 'Redux'

tags:
  - redux

date: 2023-11-22
---

## Redux (Toolkit)

React에서 Redux를 사용하면 모든 components들이 state를 공유 가능.
useState()와 유사한 함수 createSlice()를 사용
slice 변경 함수를 `Action`이라고 함


## 사용 방법

1. `index.js`에서 App을 Provider 태그로 감싸기

```javascript
//index.js
import { Provider } from 'react-redux';
import store from "./store";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <Provider store={}>
    <React.StrictMode>
      <App />
    </React.StrictMode>
  </Provider>
);
```

2. `store.js`를 생성 후 아래와 같이 작성

- Slice를 작성하고, reducer를 작성

```javascript
//store.js
import { configureStore, createSlice } from '@reduxjs/toolkit'

// useState와 유사한 역할 - Slice라고 부름
// 보통 name과 변수명을 동일하게 작성
let 작명1 = createSlice({
  name: '작명1',
  initialState: 'value',
})
let 작명2 = createSlice({
  name: '작명2',
  initialState: [1, 2, 3],
})
// 공유할 slice를 reducer에 작성
export default configureStore({
  reducer: {
    작명1: 작명1.reducer,
    작명2: 작명2.reducer,
  },
})
```

3.불러올 컴포넌트에 가서 `useSelector`를 활용하여 불러오기

```javascript
import { useSelector } from "react-redux";

export default function ff() {
  //방법1 - a =='value'
  let a = useSelector((state)=> state.작명1 )

  //방법2 - b.작명 == [1,2,3]
  let b = useSelector((state)=> state )
  console.log(b.작명2)
```

---

## Slice 변경하기(자료가 String type인 경우)

1.slice를 변경하는 함수를 reducers에 생성
2.export 할 함수를 export

```javascript
let user = createSlice({
  name: 'user',
  initialState: 'bbb',
  reducers: {
    changeName(state) {
      return 'aaa ' + state // aaa bbb
    },
    f1() {},
    f2() {},
  },
})
//export
export let { changeName, f1, f2 } = user.actions
```

3.dispatch()로 감싸서 실행.

```javascript
import { useDispatch, useSelector } from "react-redux";
import { changeName } from './store';

const user = useSelector((state) => state.user);
const dispatch = useDispatch()

return (
  <div>
    <p>{user}</p>
    <button
      onClick={() => {
        dispatch(changeName())
      }}
    >
      버튼
    </button>
  </div>
)
```

## Slice 변경하기(Object, Array type인 경우)

```javascript
let user = createSlice({
  name: "user",
  initialState: {name: 'aaa', age: 30},
  reducers: {
    changeName(state, action){
      //방법 2가지 중 1개 선택하여 사용
      state.name = 'bbb'; 
      // return {name : 'bbb', age: 30};

      // 파라미터를 사용하는 방법 - payload를 붙여서 사용
      // state.name = 'bbb'+action.payload
    },
```